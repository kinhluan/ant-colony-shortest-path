<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACO Flowchart - Mermaid</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .mermaid {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            overflow-x: auto;
        }
        .legend {
            margin-top: 40px;
            padding: 25px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
        }
        .legend h2 {
            color: #333;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .legend-color {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            flex-shrink: 0;
        }
        .formulas {
            margin-top: 30px;
            padding: 25px;
            background: #fff9db;
            border-radius: 10px;
            border: 2px solid #f59e0b;
        }
        .formulas h2 {
            color: #b45309;
            margin-bottom: 20px;
        }
        .formula-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
        }
        .formula-item strong {
            color: #b45309;
            display: block;
            margin-bottom: 8px;
        }
        .formula-item code {
            background: #f3f4f6;
            padding: 8px 12px;
            border-radius: 5px;
            display: block;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
        }
        .params {
            margin-top: 30px;
            padding: 25px;
            background: #e0f2fe;
            border-radius: 10px;
        }
        .params h2 {
            color: #0369a1;
            margin-bottom: 20px;
        }
        .params-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .param-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #0369a1;
        }
        .param-item strong {
            color: #0369a1;
        }

        /* Menu Navigation Styles */
        .menu-nav {
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 0;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin: -20px -20px 20px -20px;
        }

        .menu-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .menu-logo {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .menu-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .menu-links a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .menu-links a:hover {
            background: rgba(255,255,255,0.25);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .menu-links a:active {
            transform: translateY(0);
        }

        /* Scroll-to-top button */
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            z-index: 1001;
        }

        .scroll-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
        }

        /* Responsive menu */
        @media (max-width: 768px) {
            .menu-container {
                flex-direction: column;
                align-items: stretch;
            }

            .menu-logo {
                justify-content: center;
            }

            .menu-links {
                flex-direction: column;
            }

            .menu-links a {
                text-align: center;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Menu Navigation -->
    <nav class="menu-nav">
        <div class="menu-container">
            <a href="#" class="menu-logo">
                <span>üêú</span>
                <span>ACO Flowchart</span>
            </a>
            <div class="menu-links">
                <a href="#flowchart">üìä Flowchart</a>
                <a href="#legend">üìã Ch√∫ th√≠ch</a>
                <a href="#formulas">üìê C√¥ng th·ª©c</a>
                <a href="#params">‚öôÔ∏è Tham s·ªë</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1>üêú Flowchart Thu·∫≠t To√°n ACO</h1>
        <div class="subtitle">Ant Colony Optimization - T·ªëi ∆Øu H√≥a ƒê√†n Ki·∫øn</div>

        <div id="flowchart" class="mermaid">
flowchart LR
    Start([B·∫Øt ƒë·∫ßu])
    Init[Kh·ªüi t·∫°o tham s·ªë<br/>Œ±, Œ≤, œÅ, Q, m]
    InitPh[Kh·ªüi t·∫°o Pheromone<br/>œÑij = œÑ‚ÇÄ]
    CreateAnts[T·∫°o m ki·∫øn<br/>t·∫°i c√°c n√∫t ng·∫´u nhi√™n]
    
    LoopStart{{V√≤ng l·∫∑p: k = 1 to m}}
    BuildSol[X√¢y d·ª±ng gi·∫£i ph√°p<br/>cho ki·∫øn k]
    
    CalcProb{T√≠nh x√°c su·∫•t ch·ªçn n√∫t j<br/>p = œÑ^Œ± √ó Œ∑^Œ≤ / Œ£}
    SelectNode[Ch·ªçn n√∫t j theo x√°c su·∫•t]
    MoveAnt[Di chuy·ªÉn ki·∫øn k ƒë·∫øn n√∫t j]
    CheckComplete{Tour ho√†n th√†nh?}
    
    Evaporate[B·ªëc h∆°i Pheromone<br/>œÑ = 1-œÅ √ó œÑ]
    UpdatePh[C·∫≠p nh·∫≠t Pheromone<br/>ŒîœÑ = Q / Lk]
    AddPh[œÑ = œÑ + Œ£ ŒîœÑ]
    
    SaveBest[L∆∞u gi·∫£i ph√°p t·ªët nh·∫•t]
    CheckStop{ƒêi·ªÅu ki·ªán d·ª´ng?<br/>Max iteration ho·∫∑c h·ªôi t·ª•}
    End([K·∫øt th√∫c<br/>Tr·∫£ v·ªÅ gi·∫£i ph√°p t·ªët nh·∫•t])
    
    Start --> Init
    Init --> InitPh
    InitPh --> CreateAnts
    CreateAnts --> LoopStart
    LoopStart --> BuildSol
    BuildSol --> CalcProb
    CalcProb --> SelectNode
    SelectNode --> MoveAnt
    MoveAnt --> CheckComplete
    CheckComplete -->|Ch∆∞a| CalcProb
    CheckComplete -->|R·ªìi| LoopStart
    LoopStart --> Evaporate
    Evaporate --> UpdatePh
    UpdatePh --> AddPh
    AddPh --> SaveBest
    SaveBest --> CheckStop
    CheckStop -->|Kh√¥ng| CreateAnts
    CheckStop -->|C√≥| End
    
    classDef startEnd fill:#22c55e,stroke:#166534,color:#fff,stroke-width:3px
    classDef process fill:#3b82f6,stroke:#1e40af,color:#fff,stroke-width:2px
    classDef decision fill:#f59e0b,stroke:#b45309,color:#fff,stroke-width:2px
    classDef loop fill:#8b5cf6,stroke:#5b21b6,color:#fff,stroke-width:3px
    classDef pheromone fill:#ef4444,stroke:#991b1b,color:#fff,stroke-width:2px
    
    class Start,End startEnd
    class Init,InitPh,CreateAnts,BuildSol,SelectNode,MoveAnt,SaveBest process
    class CalcProb,CheckComplete,CheckStop decision
    class LoopStart loop
    class Evaporate,UpdatePh,AddPh pheromone
        </div>

        <div id="legend" class="legend">
            <h2>üìã Ch√∫ th√≠ch m√†u s·∫Øc</h2>
            <div class="legend-grid">
                <div class="legend-item">
                    <div class="legend-color" style="background: #22c55e; border: 3px solid #166534;"></div>
                    <span><strong>B·∫Øt ƒë·∫ßu/K·∫øt th√∫c</strong><br>ƒêi·ªÉm kh·ªüi ƒë·ªông v√† k·∫øt th√∫c</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3b82f6; border: 2px solid #1e40af;"></div>
                    <span><strong>X·ª≠ l√Ω</strong><br>C√°c b∆∞·ªõc x·ª≠ l√Ω d·ªØ li·ªáu</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f59e0b; border: 2px solid #b45309;"></div>
                    <span><strong>Quy·∫øt ƒë·ªãnh</strong><br>ƒêi·ªÉm r·∫Ω nh√°nh logic</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #8b5cf6; border: 3px solid #5b21b6;"></div>
                    <span><strong>V√≤ng l·∫∑p</strong><br>L·∫∑p qua t·∫•t c·∫£ ki·∫øn</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ef4444; border: 2px solid #991b1b;"></div>
                    <span><strong>C·∫≠p nh·∫≠t Pheromone</strong><br>B·ªëc h∆°i v√† th√™m m·ªõi</span>
                </div>
            </div>
        </div>

        <div id="formulas" class="formulas">
            <h2>üìê C√¥ng th·ª©c to√°n h·ªçc ch√≠nh</h2>
            
            <div class="formula-item">
                <strong>1. X√°c su·∫•t ch·ªçn n√∫t:</strong>
                <code>p<sub>ij</sub><sup>k</sup> = [œÑ<sub>ij</sub>]<sup>Œ±</sup> ¬∑ [Œ∑<sub>ij</sub>]<sup>Œ≤</sup> / Œ£<sub>l‚ààN<sub>i</sub></sub>[œÑ<sub>il</sub>]<sup>Œ±</sup> ¬∑ [Œ∑<sub>il</sub>]<sup>Œ≤</sup></code>
                <div style="margin-top: 8px; color: #666; font-size: 0.9em;">
                    Trong ƒë√≥: Œ∑<sub>ij</sub> = 1/d<sub>ij</sub> (visibility - heuristic information)
                </div>
            </div>

            <div class="formula-item">
                <strong>2. B·ªëc h∆°i Pheromone:</strong>
                <code>œÑ<sub>ij</sub>(t+1) = (1 - œÅ) ¬∑ œÑ<sub>ij</sub>(t)</code>
                <div style="margin-top: 8px; color: #666; font-size: 0.9em;">
                    œÅ ‚àà (0,1] l√† h·ªá s·ªë b·ªëc h∆°i
                </div>
            </div>

            <div class="formula-item">
                <strong>3. C·∫≠p nh·∫≠t Pheromone t·ªïng:</strong>
                <code>œÑ<sub>ij</sub>(t+1) = (1 - œÅ) ¬∑ œÑ<sub>ij</sub>(t) + Œ£<sub>k=1</sub><sup>m</sup> ŒîœÑ<sub>ij</sub><sup>k</sup></code>
            </div>

            <div class="formula-item">
                <strong>4. Pheromone t·ª´ ki·∫øn k:</strong>
                <code>ŒîœÑ<sub>ij</sub><sup>k</sup> = Q / L<sub>k</sub> (n·∫øu ki·∫øn k ƒëi qua c·∫°nh ij, ng∆∞·ª£c l·∫°i = 0)</code>
                <div style="margin-top: 8px; color: #666; font-size: 0.9em;">
                    L<sub>k</sub> l√† ƒë·ªô d√†i tour c·ªßa ki·∫øn k
                </div>
            </div>
        </div>

        <div id="params" class="params">
            <h2>‚öôÔ∏è Tham s·ªë thu·∫≠t to√°n</h2>
            <div class="params-grid">
                <div class="param-item">
                    <strong>Œ± (alpha)</strong><br>
                    Tr·ªçng s·ªë pheromone<br>
                    <em>Th∆∞·ªùng = 1</em>
                </div>
                <div class="param-item">
                    <strong>Œ≤ (beta)</strong><br>
                    Tr·ªçng s·ªë heuristic<br>
                    <em>Th∆∞·ªùng = 2-5</em>
                </div>
                <div class="param-item">
                    <strong>œÅ (rho)</strong><br>
                    T·ª∑ l·ªá b·ªëc h∆°i<br>
                    <em>0.1 - 0.5</em>
                </div>
                <div class="param-item">
                    <strong>Q</strong><br>
                    H·∫±ng s·ªë pheromone<br>
                    <em>1 - 100</em>
                </div>
                <div class="param-item">
                    <strong>m</strong><br>
                    S·ªë l∆∞·ª£ng ki·∫øn<br>
                    <em>10 - 50</em>
                </div>
                <div class="param-item">
                    <strong>œÑ‚ÇÄ</strong><br>
                    Pheromone ban ƒë·∫ßu<br>
                    <em>0.1 - 1.0</em>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll to top button -->
    <div class="scroll-top" id="scrollTop">
        ‚Üë
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        // Smooth scroll for menu links
        document.querySelectorAll('.menu-links a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    const offsetTop = targetElement.offsetTop - 80; // Account for sticky menu
                    window.scrollTo({
                        top: offsetTop,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Scroll to top button functionality
        const scrollTopBtn = document.getElementById('scrollTop');

        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                scrollTopBtn.classList.add('visible');
            } else {
                scrollTopBtn.classList.remove('visible');
            }
        });

        scrollTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Highlight active menu item on scroll
        const sections = document.querySelectorAll('[id]');
        const menuLinks = document.querySelectorAll('.menu-links a');

        window.addEventListener('scroll', function() {
            let current = '';

            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.clientHeight;

                if (window.pageYOffset >= sectionTop &&
                    window.pageYOffset < sectionTop + sectionHeight) {
                    current = section.getAttribute('id');
                }
            });

            menuLinks.forEach(link => {
                link.style.background = 'rgba(255,255,255,0.1)';
                if (link.getAttribute('href') === '#' + current) {
                    link.style.background = 'rgba(255,255,255,0.25)';
                }
            });
        });
    </script>
</body>
</html>